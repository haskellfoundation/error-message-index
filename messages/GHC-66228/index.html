<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="noindex">
  <title>View pattern in expression context [GHC-66228] — Haskell Error Index</title>
  <link rel="stylesheet" href="../../css/highlight.css">
  <script src="../../js/highlight.min.js"></script>
  <link rel="stylesheet" href="../../css/default.css" />
  <link rel="stylesheet" href="../../css/theme.css" />
</head>

<body>
  <main role="main">
    <nav class="breadcrumb">
      
      <a href="../../">The Haskell Error Index</a>&nbsp;»
      
      View pattern in expression context [GHC-66228]
    </nav>
    <h1>View pattern in expression context [GHC-66228]</h1>
    

<p><i>Language extension: <code>ViewPatterns</code></i></p>

<p>A <a href="https://ghc.gitlab.haskell.org/ghc/doc/users_guide/exts/view_patterns.html">view pattern</a> allows pattern matching on the result of a function.
While most kinds of patterns look just like the expressions that construct the data that the pattern recognizes, view patterns don’t correspond directly to an expression.
This means that using them where an expression is expected is an error.</p>



<h2>Examples</h2>

<details open="open">
  <summary>Missing lambda</summary>
  <div class="details-inner">
    <h2 id="message">Message</h2>
<pre><code>NotLambda.hs:3:9: error: [GHC-66228]
    View pattern in expression context: x -&gt; x
  |
3 | five = (x -&gt; x) 5
  |         ^^^^^^</code></pre>
<h2 id="explanation">Explanation</h2>
<p>In this example, the programmer forgot the <code>\</code> at the beginning of their anonymous function.
This caused the parser to recognize the function as a view pattern instead of a lambda.</p>

<pre class="filename">NotLambda.hs</pre>
<div class="example-container">
  <div class="example">
    <div class="example-inner">
      <div class="example-title">Before</div>
      <!-- keep next line as is, i.e., on one line, or the code will not format properly -->
      <pre class="example-pre"><code class="language-haskell">module NotLambda where

five = (x -> x) 5
</code></pre>
    </div>
  </div>
  <div class="example">
    <div class="example-inner">
      <div class="example-title">After</div>
      <!-- keep next line as is, i.e., on one line, or the code will not format propertly -->
      <pre class="example-pre"><code class="language-haskell">module NotLambda where

five = (\x -> x) 5
</code></pre>
    </div>
  </div>
</div>


  </div>
</details>

<details open="open">
  <summary>View pattern in expression</summary>
  <div class="details-inner">
    <h2 id="message">Message</h2>
<pre><code>ViewPatternExpr.hs:3:6: error: [GHC-66228]
    View pattern in expression context: sqrt -&gt; y
  |
3 | h = (sqrt -&gt; y)
  |      ^^^^^^^^^</code></pre>
<h2 id="explanation">Explanation</h2>
<p>In this context, the view pattern is being used instead of a function.
The issue can be corrected by not using a view pattern.</p>

<pre class="filename">ViewPatternExpr.hs</pre>
<div class="example-container">
  <div class="example">
    <div class="example-inner">
      <div class="example-title">Before</div>
      <!-- keep next line as is, i.e., on one line, or the code will not format properly -->
      <pre class="example-pre"><code class="language-haskell">module ViewPatternExpr where

h = (sqrt -> y)
</code></pre>
    </div>
  </div>
  <div class="example">
    <div class="example-inner">
      <div class="example-title">After</div>
      <!-- keep next line as is, i.e., on one line, or the code will not format propertly -->
      <pre class="example-pre"><code class="language-haskell">module ViewPatternExpr where

h = sqrt
</code></pre>
    </div>
  </div>
</div>


  </div>
</details>



  </main>

  <footer>
    <p class="HF foot">
      This site is a project of <a href="https://haskell.foundation" target="_blank" rel="noopener noreferrer">The
        Haskell Foundation</a>.
    </p>
    <p class="shoutout foot">
      Site proudly generated by
      <a href="http://jaspervdj.be/hakyll" target="_blank" rel="noopener noreferrer">Hakyll</a>
    </p>
  </footer>

  <script>document.querySelectorAll('code.language-haskell').forEach(el => {
      hljs.highlightElement(el);
    });</script>
</body>

</html>
