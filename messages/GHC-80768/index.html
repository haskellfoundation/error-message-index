<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noindex">
        <title>Class kind signatures need to be constraints [GHC-80768] — Haskell Error Index</title>
        <link rel="stylesheet" href="../../css/default.css" />
        <link rel="stylesheet" href="../../css/highlight.css">
        <script src="../../js/highlight.min.js"></script>
    </head>
    <body>

        <main role="main">
            <nav class="breadcrumb">
              
                <a href="../../index.html">The Haskell Error Index</a>&nbsp;»
              
              Class kind signatures need to be constraints [GHC-80768]
            </nav>
            <h1>Class kind signatures need to be constraints [GHC-80768]</h1>
            


<p>Similarly to how type families are not allowed in data type return kinds, type families are not allowed in class return kinds. Usually, GHC compares types and kinds up to type family reductions, but not in these two cases.</p>

<h2>Examples</h2>

<details open="open">
  <summary>Kind signatures on classes must end with Constraint unobscured by type families</summary>
  <div class="example-container">
    <p>The problem here is the usage of the type family <code>Id</code> in the standalone kind signature for the typeclass <code>C</code>. Kind signatures for classes must literally end in <code>Constraint</code> rather than in a kind that is equivalent to it.</p>
<h2 id="error-message">Error Message</h2>
<pre><code>ClassKindNotConstraint.hs:14:1: error: [GHC-80768]
    • Kind signature on a class must end with Constraint
      unobscured by type families
    • In the class declaration for ‘C’
   |
14 | class C a
   | ^^^^^^^^^</code></pre>

<table width="100%">
  
  <tr><td colspan="2" class="filename"><pre>ClassKindNotConstraint.hs</pre></td></tr>
  <tr>
    <td width="50%" class="beforeafter">Before</td>
    <td width="50%" class="beforeafter">After</td>
  </tr>
  <tr>
    <td>
      <pre><code class="language-haskell">{-# LANGUAGE ConstraintKinds #-}
{-# LANGUAGE DataKinds #-}
{-# LANGUAGE StandaloneKindSignatures #-}
{-# LANGUAGE TypeFamilies #-}

module ClassKindNotConstraint where

import Data.Kind

type family Id (x :: Type) :: Type where
  Id x = x

type C :: Type -> Id Constraint
class C a
</code></pre>
    </td>
    <td>
      <pre><code class="language-haskell">{-# LANGUAGE ConstraintKinds #-}
{-# LANGUAGE StandaloneKindSignatures #-}

module ClassKindNotConstraint where

import Data.Kind

type C :: Type -> Constraint
class C a
</code></pre>
    </td>
  </tr>
  
</table>

  </div>
</details>


        </main>

        <footer>
          <p class="HF foot">
            This site is a project of <a href="https://haskell.foundation" target="_blank" rel="noopener noreferrer">The Haskell Foundation</a>.
          </p>
          <p class="shoutout foot">
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll" target="_blank" rel="noopener noreferrer">Hakyll</a>
          </p>
        </footer>

        <script>document.querySelectorAll('code.language-haskell').forEach(el => {
          hljs.highlightElement(el);
        });</script>
    </body>
</html>
