<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="noindex">
  <title>let-syntax in pattern [GHC-78892] — Haskell Error Index</title>
  <link rel="stylesheet" href="../../css/highlight.css">
  <script src="../../js/highlight.min.js"></script>
  <link rel="stylesheet" href="../../css/default.css" />
  <link rel="stylesheet" href="../../css/theme.css" />
</head>

<body>
  <main role="main">
    <nav class="breadcrumb">
      
      <a href>The Haskell Error Index</a>&nbsp;»
      
      let-syntax in pattern [GHC-78892]
    </nav>
    <h1>let-syntax in pattern [GHC-78892]</h1>
    

<p>Pattern matching allows constructors and literals to be used to take apart values, exposing their contents. Even though patterns resemble expressions, they are not evaluated. The <code>let ... in ...</code> syntax is used to introduce declarations that are scoped to an expression, which doesn’t make sense as a pattern without evaluation. See <a href="https://errors.haskell.org/messages/GHC-78892/">GHC-04584</a> for more information on why expressions aren’t permitted in pattern matching.</p>
<p>## Example Text</p>
<pre><code>(let ... in ...)-syntax in pattern</code></pre>



<h2>Examples</h2>

<details open="open">
  <summary>Using let ... in ... syntax in pattern.</summary>
  <div class="details-inner">
    <p>When pattern matching, let expressions are not allowed as patterns to be matched against. The logic encapsulated here should either be lifted to outside of the function, or moved inside of the function itself.</p>
<h1 id="error-message">Error Message</h1>
<pre><code>Example.hs:5:6: error: [GHC-78892]
    (let ... in ...)-syntax in pattern
  |
5 | f n (let exp = x^2 in exp n) = True 
  |      ^^^^^^^^^^^^^^^^^^^^^^</code></pre>
<p>#  Intermediate fix step
In the below example, it is worth noting that you may first have considered refactoring to something along the lines of</p>
<pre><code>sq :: Int -&gt; Int 
sq x = x^2 

f :: Int -&gt; Int -&gt; Bool 
f n (sq n) = True
f n _ = False 
</code></pre>
<p>The above code would throw a parse error in the pattern <a href="https://errors.haskell.org/messages/GHC-07626/">GHC-07626</a>.</p>

<pre class="filename">Example.hs</pre>
<div class="example-container">
  <div class="example">
    <div class="example-inner">
      <div class="example-title">Before</div>
      <!-- keep next line as is, i.e., on one line, or the code will not format properly -->
      <pre class="example-pre"><code class="language-haskell">module Example where

-- Is the second argument the square of the first? 
f :: Int -> Int -> Bool 
f n (let sq = x^2 in sq n) = True 
f n _ = False
</code></pre>
    </div>
  </div>
  <div class="example">
    <div class="example-inner">
      <div class="example-title">After</div>
      <!-- keep next line as is, i.e., on one line, or the code will not format propertly -->
      <pre class="example-pre"><code class="language-haskell">module Example where

-- Is the second argument the square of the first?
sq :: Int -> Int 
sq x = x^2

f :: Int -> Int -> Bool 
f n m 
    | m == sq n = True
    | otherwise = False 
</code></pre>
    </div>
  </div>
</div>


  </div>
</details>



  </main>

  <footer>
    <p class="HF foot">
      This site is a project of <a href="https://haskell.foundation" target="_blank" rel="noopener noreferrer">The
        Haskell Foundation</a>.
    </p>
    <p class="shoutout foot">
      Site proudly generated by
      <a href="http://jaspervdj.be/hakyll" target="_blank" rel="noopener noreferrer">Hakyll</a>
    </p>
  </footer>

  <script>document.querySelectorAll('code.language-haskell').forEach(el => {
      hljs.highlightElement(el);
    });</script>
</body>

</html>
