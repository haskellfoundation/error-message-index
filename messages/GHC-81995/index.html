<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Unused "do" bind [GHC-81995] — Haskell Error Index</title>
  <link rel="stylesheet" href="../../css/highlight.css">
  <script src="../../js/highlight.min.js"></script>
  <link rel="stylesheet" href="../../css/default.css" />
  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="canonical" href="../../messages/GHC-81995/" />
</head>

<body>
  <main role="main">
    <nav class="breadcrumb">
      
      <a href="../../">The Haskell Error Index</a>&nbsp;»
      
      Unused "do" bind [GHC-81995]
    </nav>
    <h1>Unused "do" bind [GHC-81995]</h1>
    
<p>
  <i>Flag: <code>-Wunused-do-bind</code></i><br />
  
      
      <i>Enabled by: <code>-Wall</code></i>
      
  
</p>


<p>Many monadic actions perform side effects before returning a value.</p>
<p>Sometimes, we are only interested in the side effect of a monadic action, and
not in the return value. In these cases, we should use appropriate functions
indicating that we purposefully ignore the return value.</p>
<p>Even more, in monadic code without side effects such as the list monad, this
warning may indicate a bug.</p>



<h2>Examples</h2>

<details open="open">
  <summary>Action without side effect is completely ignored in pure monadic code</summary>
  <div class="details-inner">
    <h1 id="error-message">Error message</h1>
<pre><code>list/before/List.hs:6:3: warning: [GHC-81995] [-Wunused-do-bind]
    A do-notation statement discarded a result of type ‘Integer’
    Suggested fix: Suppress this warning by saying ‘_ &lt;- return 1’
  |
6 |   return 1 -- This action has no side effects and is completely ignored.
  |   ^^^^^^^^</code></pre>

<pre class="filename">List.hs</pre>
<div class="example-container">
  <div class="example">
    <div class="example-inner">
      <div class="example-title">Before</div>
      <!-- keep next line as is, i.e., on one line, or the code will not format properly -->
      <pre class="example-pre"><code class="language-haskell">module List where

-- Evaluates to [2].
list :: [Int]
list = do
  return 1 -- This action has no side effects and is completely ignored.
  return 2
</code></pre>
    </div>
  </div>
  <div class="example">
    <div class="example-inner">
      <div class="example-title">After</div>
      <!-- keep next line as is, i.e., on one line, or the code will not format propertly -->
      <pre class="example-pre"><code class="language-haskell">module List where

list :: [Int]
-- list = do return 2
list = [2]
</code></pre>
    </div>
  </div>
</div>


  </div>
</details>

<details open="open">
  <summary>Fix warning about unused "do" bind using `sequence_`</summary>
  <div class="details-inner">
    <p>For example, <code>sequence :: (Traversable t, Monad m) =&gt; t (m a) -&gt; m (t a)</code>
performs all actions in a traversable container and returns the container with
the return values. In a similar manner, <code>sequence_</code> performs all actions but
indicates that the we want to ignore the return value.</p>
<h1 id="error-message">Error message</h1>
<pre><code>sequence/before/GetLine.hs:5:3: warning: [GHC-81995] [-Wunused-do-bind]
    A do-notation statement discarded a result of type ‘[()]’
    Suggested fix:
      Suppress this warning by saying
        ‘_ &lt;- sequence [putStrLn &quot;First line&quot;, putStrLn &quot;Second line&quot;]’
  |
5 |   sequence [putStrLn &quot;First line&quot;, putStrLn &quot;Second line&quot;]
  |   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</code></pre>

<pre class="filename">GetLine.hs</pre>
<div class="example-container">
  <div class="example">
    <div class="example-inner">
      <div class="example-title">Before</div>
      <!-- keep next line as is, i.e., on one line, or the code will not format properly -->
      <pre class="example-pre"><code class="language-haskell">module GetLine where

main :: IO ()
main = do
  sequence [putStrLn "First line", putStrLn "Second line"]
  putStrLn "Done."
</code></pre>
    </div>
  </div>
  <div class="example">
    <div class="example-inner">
      <div class="example-title">After</div>
      <!-- keep next line as is, i.e., on one line, or the code will not format propertly -->
      <pre class="example-pre"><code class="language-haskell">module GetLine where

main :: IO ()
main = do
  sequence_ [putStrLn "First line", putStrLn "Second line"]
  putStrLn "Done."
</code></pre>
    </div>
  </div>
</div>


  </div>
</details>



  </main>

  <footer>
    <p class="HF foot">
      This site is a project of <a href="https://haskell.foundation" target="_blank" rel="noopener noreferrer">The
        Haskell Foundation</a>.
    </p>
    <p class="shoutout foot">
      Site proudly generated by
      <a href="http://jaspervdj.be/hakyll" target="_blank" rel="noopener noreferrer">Hakyll</a>
    </p>
  </footer>

  <script>document.querySelectorAll('code.language-haskell').forEach(el => {
      hljs.highlightElement(el);
    });</script>
</body>

</html>
